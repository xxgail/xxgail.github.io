
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  
  <title>ThinkPHP5.0笔记 | xxGail&#39;s Blogs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="百度云地址">
<meta name="keywords" content="php,框架">
<meta property="og:type" content="article">
<meta property="og:title" content="ThinkPHP5.0笔记">
<meta property="og:url" content="http://test.xxgail.cn/2017/11/20/ThinkPHP5.0笔记/index.html">
<meta property="og:site_name" content="xxGail&#39;s Blogs">
<meta property="og:description" content="百度云地址">
<meta property="og:image" content="http://ozp0vvyub.bkt.clouddn.com/blog/171121/mah977cBAh.jpg?imageslim">
<meta property="og:image" content="http://ozp0vvyub.bkt.clouddn.com/blog/171121/Gi36lB8CI5.jpg?imageslim">
<meta property="og:updated_time" content="2017-12-21T09:32:22.368Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ThinkPHP5.0笔记">
<meta name="twitter:description" content="百度云地址">
<meta name="twitter:image" content="http://ozp0vvyub.bkt.clouddn.com/blog/171121/mah977cBAh.jpg?imageslim">
  
  
    <link rel="icon" href="http://ozp0vvyub.bkt.clouddn.com/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
  

</head>

<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <nav id="upper-nav" class="inner">
      <a id="main-nav-toggle" class="nav-icon"></a>
      <div class="sub-nav">
        
        
          <a id="nav-github" class="nav-icon" href="https://github.com/xxgail"></a>
        
      </div>
    </nav>
    <div id="header-title">
      
        <h1 id="blog-title-wrap">
          <a href="/" id="blog-title">xxGail&#39;s Blogs</a>
        </h1>
      
    </div>
    <div id="contenedor">
      <ul class="cube">
        <li class="cara">W</li>
        <li class="cara"></li>
        <li class="cara"></li>
        <li class="cara"></li>
        <li class="cara"></li>
        <li class="cara"></li>
      </ul>
    </div>
    <nav id="main-nav">
      
        <a class="main-nav-link" href="/">Home</a>
      
        <a class="main-nav-link" href="/archives">Archives</a>
      
        <a class="main-nav-link" href="/about">About</a>
      
      <a class="main-nav-link st-search-show-outputs">Search</a>
    </nav>
  </div>
</header>

    <div class="outer">
      <section id="main"><article id="post-ThinkPHP5.0笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <h3 href="/2017/11/20/ThinkPHP5.0笔记/" class="article-date">
  <time datetime="2017-11-20T08:35:02.000Z" itemprop="datePublished">2017-11-20</time>
</h3>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/编程/">编程</a>
  </div>

  </div>
  <div class="article-inner">
  <div class="curve-down">
  <div class="fill-content">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ThinkPHP5.0笔记
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p><a href="https://pan.baidu.com/s/1jI1n6Fc" target="_blank" rel="noopener">百度云地址</a><br><a href=""></a><br><a id="more"></a></p>
<h1 id="第一章-基本结构"><a href="#第一章-基本结构" class="headerlink" title="第一章 基本结构"></a>第一章 基本结构</h1><h2 id="1-目录结构："><a href="#1-目录结构：" class="headerlink" title="1.目录结构："></a>1.目录结构：</h2><pre><code>project  应用部署目录
├─application           应用目录（可设置）
│  ├─common             公共模块目录（可更改）
│ ├─admin              后台目录
│  ├─index              前台目录(可更改)
│  │  ├─config.php      模块配置文件
│  │  ├─common.php      模块函数文件
│  │  ├─controller      控制器目录
│  │  ├─model           模型目录
│  │  ├─view            视图目录
│  │  └─ ...            更多类库目录
│  ├─command.php        命令行工具配置文件
│  ├─common.php         应用公共（函数）文件
│  ├─config.php         应用（公共）配置文件
│  ├─database.php       数据库配置文件
│  ├─tags.php           应用行为扩展定义文件
│  └─route.php          路由配置文件
├─extend                扩展类库目录（可定义）
├─public                静态资源和入口文件
│  ├─static             静态资源存放目录(css,js,image)
│  ├─index.php          应用入口文件
│  ├─router.php         快速测试文件
│  └─.htaccess          用于 apache 的重写
├─runtime               网站运行临时目录（可写，可设置）
├─vendor                第三方类库目录（Composer）
├─thinkphp              框架系统目录
│  ├─lang               语言包目录
│  ├─library            TP框架核心类库目录
│  │  ├─think           Think 类库包目录
│  │  └─traits          系统 Traits 目录
│  ├─tpl                系统模板目录
│  ├─.htaccess          用于 apache 的重写
│  ├─.travis.yml        CI 定义文件
│  ├─base.php           基础定义文件
│  ├─composer.json      composer 定义文件
│  ├─console.php        控制台入口文件
│  ├─convention.php     惯例配置文件
│  ├─helper.php         助手函数文件（可选）
│  ├─LICENSE.txt        授权说明文件
│  ├─phpunit.xml        单元测试配置文件
│  ├─README.md          README 文件
│  └─start.php          框架引导文件
├─build.php             自动生成定义文件（参考）
├─composer.json         composer 定义文件
├─LICENSE.txt           授权说明文件
├─README.md             README 文件
├─think                 命令行入口文件
</code></pre><h2 id="2-URL解析"><a href="#2-URL解析" class="headerlink" title="2.URL解析"></a>2.URL解析</h2><p>http://    www.tp5.com   /index.php     /Index    /Index      /index<br>协议         域名            入口文件      模块       控制器     方法</p>
<h1 id="第二章-初步了解"><a href="#第二章-初步了解" class="headerlink" title="第二章 初步了解"></a>第二章 初步了解</h1><h2 id="1-入口文件"><a href="#1-入口文件" class="headerlink" title="1.入口文件"></a>1.入口文件</h2><ol>
<li>目录：www/tp5/public/index.php</li>
<li>作用：负责整个tp的请求</li>
</ol>
<h2 id="2-应用"><a href="#2-应用" class="headerlink" title="2.应用"></a>2.应用</h2><ol>
<li>目录：www/tp5/application</li>
<li>作用：一个应用代表一个网站</li>
</ol>
<h2 id="3-模块（以前台为例）"><a href="#3-模块（以前台为例）" class="headerlink" title="3.模块（以前台为例）"></a>3.模块（以前台为例）</h2><ol>
<li>目录：www/tp5/application/Index</li>
<li>网站所有的前台相关都与其有关</li>
<li>新建后台模块：<ol>
<li>在application下新建一个admin文件夹</li>
<li>在admin下创建model，View，controller文件夹</li>
<li>在controller文件夹下新建控制器（参照6）</li>
</ol>
</li>
</ol>
<h2 id="4-控制器"><a href="#4-控制器" class="headerlink" title="4.控制器"></a>4.控制器</h2><ol>
<li>目录：www/tp5/application/Index/controller</li>
<li>作用：书写业务逻辑</li>
<li>新建控制器（前台<ol>
<li>在前台控制器目录下新建User.php</li>
<li>在控制器中书写代码</li>
<li>地址栏访问     www.tp5.com/index.php/Index/User/index</li>
<li>注意：<ol>
<li>必须声明命名空间</li>
<li>文件名大写，文件夹小写</li>
<li>类名与文件名一致</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="5-操作（方法）"><a href="#5-操作（方法）" class="headerlink" title="5.操作（方法）"></a>5.操作（方法）</h2><ol>
<li>操作地址：<br>操作一般都在控制器的文件中</li>
<li>新建一个操作（前台<ol>
<li>打开前台index控制器 www/tp5/application/Index/controller/index.php</li>
<li>在控制器中新建一个方法(test</li>
<li>地址栏访问</li>
</ol>
</li>
</ol>
<h2 id="6-模型"><a href="#6-模型" class="headerlink" title="6.模型"></a>6.模型</h2><ol>
<li>目录：www/tp5/application/index/model</li>
<li>作用：负责数据库相关的处理</li>
</ol>
<h2 id="7-视图"><a href="#7-视图" class="headerlink" title="7.视图"></a>7.视图</h2><ol>
<li>目录：www/tp5/application/index/view</li>
<li>作用：页面展示</li>
</ol>
<h2 id="8-命名空间"><a href="#8-命名空间" class="headerlink" title="8.命名空间"></a>8.命名空间</h2><ol>
<li>与目录有关</li>
</ol>
<h2 id="9-跨模块-控制器调用"><a href="#9-跨模块-控制器调用" class="headerlink" title="9.跨模块/控制器调用"></a>9.跨模块/控制器调用</h2><ol>
<li><p>使用命名空间</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$model = <span class="keyword">new</span> \app\admin\controller\Index;</span><br><span class="line"><span class="keyword">echo</span> $model-&gt;index();</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用新的命名空间</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">app</span>\<span class="title">admin</span>\<span class="title">controller</span>\<span class="title">Index</span> <span class="title">as</span> <span class="title">AdminIndex</span>;</span><br><span class="line"><span class="comment">//因为控制器重名所以起一个别名</span></span><br><span class="line"></span><br><span class="line">    $model = <span class="keyword">new</span> AdminIndex();</span><br><span class="line">    <span class="keyword">echo</span> $model-&gt;index();</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用controller方法</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$model = controller(<span class="string">'admin/Index'</span>);</span><br><span class="line"><span class="keyword">echo</span> $model-&gt;index();</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="10-调用方法"><a href="#10-调用方法" class="headerlink" title="10.调用方法"></a>10.调用方法</h2><ol>
<li><p>调用当前控制器的方法</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//调用当前控制器的index方法</span></span><br><span class="line"><span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;index();</span><br><span class="line"><span class="keyword">echo</span> <span class="keyword">self</span>::index();</span><br><span class="line"><span class="keyword">echo</span> Index::index();</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用action方法调用</span></span><br><span class="line"><span class="keyword">echo</span> action(<span class="string">'index'</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>调用其他控制器中的方法</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用命名空间</span></span><br><span class="line">$model = <span class="keyword">new</span> \app\index\controller\User;</span><br><span class="line"><span class="keyword">echo</span> $model-&gt;index();</span><br><span class="line"><span class="comment">//使用系统方法</span></span><br><span class="line"><span class="keyword">echo</span> action(<span class="string">'User/index'</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>调用跨模块系统方法</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用后台模块中的index方法</span></span><br><span class="line"><span class="keyword">echo</span> action(<span class="string">'admin/Index/index'</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="第三章-TP5配置"><a href="#第三章-TP5配置" class="headerlink" title="第三章 TP5配置"></a>第三章 TP5配置</h1><h2 id="1-基本配置"><a href="#1-基本配置" class="headerlink" title="1.基本配置"></a>1.基本配置</h2><h3 id="1-配置方式（数组）"><a href="#1-配置方式（数组）" class="headerlink" title="1. 配置方式（数组）"></a>1. 配置方式（数组）</h3><pre><code><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="comment">// 数据库类型</span></span><br><span class="line">    <span class="string">'type'</span>            =&gt; <span class="string">'mysql'</span>,</span><br><span class="line">    <span class="comment">// 服务器地址</span></span><br><span class="line">    <span class="string">'hostname'</span>        =&gt; <span class="string">'127.0.0.1'</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
</code></pre><h3 id="2-配置分类"><a href="#2-配置分类" class="headerlink" title="2. 配置分类"></a>2. 配置分类</h3><ol>
<li><p>惯例配置（一般不要修改</p>
<pre><code>1. 目录：D:\wamp\www\tp5\thinkphp\convention.php
</code></pre><ol>
<li>应用配置<ol>
<li>目录：D:\wamp\www\tp5\application\config.php</li>
</ol>
</li>
<li><p>扩展配置</p>
<ol>
<li>作用：其实就是对配置文件进行分目录的管理</li>
<li>目录：D:\wamp\www\tp5\application\database.php<br>D:\wamp\www\tp5\application\extra\用户可以自定义配置文件</li>
<li>读取配置：（database中的 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> config(<span class="string">'database.password'</span>);</span><br><span class="line"><span class="keyword">echo</span> config(<span class="string">'database'</span>);<span class="comment">//配置文件的名字.配置名称</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>场景配置</p>
<ol>
<li>解决问题:开发过程中可能在不同环境下进行开发</li>
<li>如何使用<ol>
<li>修改配置（D:\wamp\www\tp5\application\config.php） <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">            <span class="comment">// 应用模式状态</span></span><br><span class="line">            <span class="string">'app_status'</span>    =&gt; <span class="string">'home'</span>,（或修改为office）</span><br><span class="line">            ``` </span><br><span class="line">        <span class="number">2.</span> 新建home.php进行配置（D:\wamp\www\tp5\application\extra\）</span><br><span class="line"><span class="number">5.</span> 模块配置</span><br><span class="line">    <span class="number">1.</span> 解决问题:每一个模块都有自己特有的配置</span><br><span class="line">    <span class="number">2.</span> 如何使用（前台</span><br><span class="line">        <span class="number">1.</span> 在前台目录下新建config.php进行配置</span><br><span class="line"><span class="number">6.</span> 动态配置</span><br><span class="line">    <span class="number">1.</span> 如何配置</span><br><span class="line">        ```php</span><br><span class="line">            <span class="comment">//通过系统方法</span></span><br><span class="line">            config(<span class="string">'name'</span>,<span class="string">'php开发'</span>);</span><br><span class="line">            <span class="keyword">echo</span> config(<span class="string">'name'</span>);</span><br><span class="line">            <span class="comment">//通过类</span></span><br><span class="line">            \think\Config::set(<span class="string">'name'</span>,<span class="string">'web开发'</span>);</span><br><span class="line">            <span class="keyword">echo</span> config(<span class="string">'name'</span>);  </span><br><span class="line">            <span class="comment">//引用命名空间</span></span><br><span class="line">            <span class="keyword">use</span> \<span class="title">think</span>\<span class="title">Config</span>;</span><br><span class="line">            Config::set(<span class="string">'name'</span>,<span class="string">'ThinkPHP'</span>);</span><br><span class="line">            <span class="keyword">echo</span> config(<span class="string">'name'</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="3-读取配置"><a href="#3-读取配置" class="headerlink" title="3. 读取配置"></a>3. 读取配置</h3><ol>
<li><p>如果配置项存在直接输出，不存在返回NULL。config参数为空时读取所有配置</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//系统函数读取配置</span></span><br><span class="line"><span class="keyword">echo</span> config(<span class="string">'name'</span>);    </span><br><span class="line"><span class="comment">//读取系统类读取配置</span></span><br><span class="line"><span class="keyword">echo</span> \think\Config::get(<span class="string">'name'</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取数组中的配置信息</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> config(<span class="string">'teacher.name'</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="4-系统类"><a href="#4-系统类" class="headerlink" title="4. 系统类"></a>4. 系统类</h3><ol>
<li>目录：D:\wamp\www\tp5\thinkphp\library\think<br> Config 设置和获取配置文件</li>
</ol>
<h3 id="5-系统方法"><a href="#5-系统方法" class="headerlink" title="5. 系统方法"></a>5. 系统方法</h3><ol>
<li>目录：D:\wamp\www\tp5\thinkphp\helper.php<ul>
<li>Controller 实例化控制器</li>
<li>action 调试模块的操作方法</li>
<li>config 设置和获取配置</li>
<li>dump 打印数据</li>
</ul>
</li>
</ol>
<h3 id="6-配置文件之间的加载顺序"><a href="#6-配置文件之间的加载顺序" class="headerlink" title="6. 配置文件之间的加载顺序"></a>6. 配置文件之间的加载顺序</h3><ol>
<li>优先级 动态配置&gt;模块配置&gt;场景配置&gt;扩展配置&gt;应用配置&gt;惯例配置</li>
<li>加载顺序 惯例配置-&gt;应用配置-&gt;扩展配置-&gt;场景配置-&gt;模块配置-&gt;动态配置</li>
<li>实现原理 array_merge() 后面加载的数据对前面加载的数据进行同名覆盖</li>
</ol>
<h3 id="7-环境变量配置"><a href="#7-环境变量配置" class="headerlink" title="7. 环境变量配置"></a>7. 环境变量配置</h3><ol>
<li>TP5.0支持环境变量配置</li>
<li><p>设置环境变量配置</p>
<ol>
<li>打开网站根目录 新建.env</li>
<li>书写环境设置（不能写中文，会报错）<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name = gail</span><br><span class="line">age = <span class="number">20</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>读取环境配置</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//命名空间</span></span><br><span class="line">var_dump(\think\Env::get(<span class="string">'name'</span>));</span><br><span class="line">var_dump(\think\Env::get(<span class="string">'age'</span>,<span class="string">'bucunzai'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//use导入类</span></span><br><span class="line"><span class="keyword">use</span> \<span class="title">think</span>\<span class="title">Env</span>;</span><br><span class="line">var_dump(Env::get(<span class="string">'name'</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p>如何使用 打开任意配置文件</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> \<span class="title">think</span>\<span class="title">Env</span>;</span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line"><span class="string">'app_namespace'</span> =&gt; <span class="string">'app'</span>,</span><br><span class="line"><span class="string">'app_debug'</span> =&gt; Env::get(<span class="string">'app_debug'</span>,<span class="keyword">false</span>),       </span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="第四章-TP5-0-路由"><a href="#第四章-TP5-0-路由" class="headerlink" title="第四章 TP5.0 路由"></a>第四章 TP5.0 路由</h1><h2 id="1-路由"><a href="#1-路由" class="headerlink" title="1.路由"></a>1.路由</h2><ol>
<li>路由的作用：<ol>
<li>简化URL地址</li>
<li>有利于搜索引擎优化</li>
</ol>
</li>
</ol>
<h2 id="2-入口文件"><a href="#2-入口文件" class="headerlink" title="2. 入口文件"></a>2. 入口文件</h2><ol>
<li>前后台分离<ol>
<li>在网站public目录下新建一个后台入口文件admin.php</li>
<li>打开admin.php<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义应用目录</span></span><br><span class="line">define(<span class="string">'APP_PATH'</span>, <span class="keyword">__DIR__</span> . <span class="string">'/../application/'</span>);</span><br><span class="line"><span class="comment">// 加载框架引导文件</span></span><br><span class="line"> <span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">'/../thinkphp/start.php'</span>;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<ol>
<li><p>绑定模块</p>
<ol>
<li>实现功能<ul>
<li>index.php 这个入口文件 只能去前台模块</li>
<li>admin.php 这个入口文件 只能去后台模块 #建议后台的入口文件稍微复杂一些</li>
</ul>
</li>
<li>如何实现  在入口文件中分别定义<ul>
<li>define(“BIND_MODULE”,’index’); # 绑定前台模块<ul>
<li>define(“BIND_MODULE”,’admin’); # 绑定后台模块</li>
</ul>
</li>
</ul>
</li>
<li>URL地址发生改变<ol>
<li>入口绑定之前<br><a href="http://www.tp.com/admin.php/模块/控制器/方法" target="_blank" rel="noopener">http://www.tp.com/admin.php/模块/控制器/方法</a></li>
<li>入口绑定之后<br><a href="http://www.tp.com/admin.php/控制器/方法" target="_blank" rel="noopener">http://www.tp.com/admin.php/控制器/方法</a></li>
</ol>
</li>
</ol>
</li>
<li><p>隐藏入口文件</p>
<ol>
<li><p>开启apache的重写(C:\AppServ\Apache24\conf\httpd.conf)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#把注释开启</span><br><span class="line">LoadModule rewrite_module modules/mod_rewrite.so</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置访问权限 (C:\AppServ\Apache24\conf\extra\httpd-vhosts.conf)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">   &lt;VirtualHost *:80&gt;</span><br><span class="line">	DocumentRoot &quot;C:\AppServ\www\tp5\public&quot;</span><br><span class="line">	ServerName www.tp5.com</span><br><span class="line">&lt;Directory &quot;C:\AppServ\www\tp5\public&quot;</span><br><span class="line"> 	Options Indexes FollowSymLinks</span><br><span class="line"> 	AllowOverride All</span><br><span class="line"> 	Require all granted</span><br><span class="line"> &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>入口文件,在网站public目录下新建.htaccess 文件</p>
<figure class="highlight plain"><figcaption><span>mod_rewrite.c></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  Options +FollowSymlinks -Multiviews</span><br><span class="line">  RewriteEngine On</span><br><span class="line">  RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class="line">  RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class="line">  RewriteRule ^(.*)$ index.php/$1 [QSA,PT,L]</span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启服务</p>
</li>
<li>url地址变化<ol>
<li>隐藏之前 <a href="http://www.tp.com/index.php/Index/test" target="_blank" rel="noopener">http://www.tp.com/index.php/Index/test</a></li>
<li>隐藏之后 <a href="http://www.tp.com/Index/test" target="_blank" rel="noopener">http://www.tp.com/Index/test</a></li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="3-Tp5-0路由学习注意"><a href="#3-Tp5-0路由学习注意" class="headerlink" title="3. Tp5.0路由学习注意:"></a>3. Tp5.0路由学习注意:</h2><ol>
<li>支持三种方式的URL解析规则</li>
<li>路由只针对应用，不针对模块，因此路由的设置也是针对应用下面的所有模块。</li>
<li>关闭后台模块,在后台入口文件(C:\AppServ\www\tp5\public\admin.php) <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 关闭admin模块的路由</span></span><br><span class="line"><span class="comment">// 必须写到 加载框架引导文件 之后否则报错</span></span><br><span class="line">\think\App::route(<span class="keyword">false</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="4-路由模式（默认是混合模式）"><a href="#4-路由模式（默认是混合模式）" class="headerlink" title="4. 路由模式（默认是混合模式）"></a>4. 路由模式（默认是混合模式）</h2><ol>
<li><p>普通模式</p>
<ol>
<li>定义 关闭路由，完全使用默认的 PATH_INFO 方式URL：</li>
<li>形式 <a href="http://www.tp.com/admin.php/index/index" target="_blank" rel="noopener">http://www.tp.com/admin.php/index/index</a></li>
<li>如何设置（config.php）<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 是否开启路由</span></span><br><span class="line"><span class="string">'url_route_on'</span>           =&gt; <span class="keyword">false</span>,</span><br><span class="line"><span class="comment">// 是否强制使用路由</span></span><br><span class="line"><span class="string">'url_route_must'</span>         =&gt; <span class="keyword">false</span>,</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>混合模式</p>
<ol>
<li>定义:<br> 开启路由，并使用路由定义+默认 PATH_INFO 方式的混合</li>
<li>如何设置<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 是否开启路由</span></span><br><span class="line"><span class="string">'url_route_on'</span>           =&gt; <span class="keyword">true</span>,</span><br><span class="line"><span class="comment">// 是否强制使用路由</span></span><br><span class="line"><span class="string">'url_route_must'</span>         =&gt; <span class="keyword">false</span>,</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>强制模式</p>
<ol>
<li>定义:<br> 开启路由，并设置必须定义路由才能访问</li>
<li>如何设置<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 是否开启路由</span></span><br><span class="line"><span class="string">'url_route_on'</span>           =&gt; <span class="keyword">true</span>,</span><br><span class="line"><span class="comment">// 是否强制使用路由</span></span><br><span class="line"><span class="string">'url_route_must'</span>         =&gt; <span class="keyword">true</span>,</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<h2 id="5-设置路由-动态单个注册"><a href="#5-设置路由-动态单个注册" class="headerlink" title="5. 设置路由-动态单个注册"></a>5. 设置路由-动态单个注册</h2><ol>
<li>设置路由格式<br> Route::rule(‘路由表达式’,’路由地址’,’请求类型’,’路由参数（数组）’,’变量规则（数组）’)</li>
<li>设置路由文件<br> C:\AppServ\www\tp5\application\route.php</li>
<li><p>如何设置</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">// 引入系统类&lt;br&gt;</span></span><br><span class="line">   <span class="keyword">use</span> <span class="title">think</span>\<span class="title">Route</span>;&lt;br&gt;</span><br><span class="line"><span class="comment">// 定义路由规则&lt;br&gt;</span></span><br><span class="line"><span class="comment">// 设置路由之后，就不能使用pathinfo访问了&lt;br&gt;</span></span><br><span class="line"><span class="comment">// 注册路由 访问到Index模块index控制器index方法&lt;br&gt;</span></span><br><span class="line">Route::rule(<span class="string">'/'</span>,<span class="string">'index/index/index'</span>);&lt;br&gt;</span><br><span class="line"><span class="comment">// 注册路由test 访问到Index模块index控制器test方法&lt;br&gt;</span></span><br><span class="line">Route::rule(<span class="string">'test'</span>,<span class="string">'index/index/test'</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>路由的形式</p>
<ol>
<li><p>静态地址路由</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册路由test 访问到Index模块. ndex控制器test方法</span></span><br><span class="line">Route::rule(<span class="string">'test'</span>,<span class="string">'index/index/test'</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>路由带参数</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册带参数路由</span></span><br><span class="line"><span class="comment">// http://www.tp.com/couser/1</span></span><br><span class="line">   <span class="comment">// http://www.tp.com/index/index/index/id/1</span></span><br><span class="line">   Route::rule(<span class="string">'course/:id'</span>,<span class="string">'index/index/course'</span>);</span><br><span class="line"><span class="comment">// 如果路由设置两个参数，必须带两个参数</span></span><br><span class="line">Route::rule(<span class="string">'time/:year/:month'</span>,<span class="string">'index/index/shijian'</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>可选参数路由</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// http://www.tp.com/time/2017</span></span><br><span class="line"><span class="comment">// http://www.tp.com/time/2017/8</span></span><br><span class="line">Route::rule(<span class="string">'time/:year/[:month]'</span>,<span class="string">'index/index/shijian'</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>全动态路由(不建议大家使用)<br> <code>Route::rule(&#39;:a/:b&#39;,&#39;index/index/dongtai&#39;);</code></p>
</li>
<li><p>完全匹配路由</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// http://www.tp.com/test1 #可以成功访问</span></span><br><span class="line"> <span class="comment">// http://www.tp.com/test1/1 #不能访问</span></span><br><span class="line"> Route::rule(<span class="string">'test1$'</span>,<span class="string">'Index/index/test1'</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>路由额外带参数<br> <code>Route::rule(&#39;test2&#39;,&#39;Index/index/test2?id=10&amp;name=zhangsan&#39;);</code></p>
</li>
</ol>
</li>
<li><p>设置请求类型</p>
<ol>
<li>TP中请求类型<br> get、post、put、delete</li>
<li>Route::rule() 默认支持所有请求类型</li>
<li><p>设置各种请求</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">          <span class="comment">// 支持get请求</span></span><br><span class="line">      Route::rule(<span class="string">'type'</span>,<span class="string">'Index/index/type'</span>,<span class="string">'get'</span>);</span><br><span class="line">      Route::get(<span class="string">'type'</span>,<span class="string">'Index/index/type'</span>);</span><br><span class="line">          <span class="comment">// 支持post请求</span></span><br><span class="line">      Route::rule(<span class="string">'type'</span>,<span class="string">'Index/index/type'</span>,<span class="string">'post'</span>);</span><br><span class="line">      Route::post(<span class="string">'type'</span>,<span class="string">'Index/index/type'</span>);</span><br><span class="line">          <span class="comment">// 同时支持get和post</span></span><br><span class="line">      Route::rule(<span class="string">'type'</span>,<span class="string">'Index/index/type'</span>,<span class="string">'get|post'</span>);</span><br><span class="line">      	<span class="comment">// 支持所有路由</span></span><br><span class="line">      Route::rule(<span class="string">'type'</span>,<span class="string">'Index/index/type'</span>,<span class="string">'*'</span>);</span><br><span class="line">      Route::any(<span class="string">'type'</span>,<span class="string">'Index/index/type'</span>);</span><br><span class="line">      	<span class="comment">// 支持put请求</span></span><br><span class="line">      Route::rule(<span class="string">'type'</span>,<span class="string">'Index/index/type'</span>,<span class="string">'put'</span>);</span><br><span class="line">Route::put(<span class="string">'type'</span>,<span class="string">'Index/index/type'</span>);</span><br><span class="line">      	<span class="comment">// 支持delete请求</span></span><br><span class="line">      Route::rule(<span class="string">'type'</span>,<span class="string">'Index/index/type'</span>,<span class="string">'delete'</span>);</span><br><span class="line">      Route::delete(<span class="string">'type'</span>,<span class="string">'Index/index/type'</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>如何模拟put和delete请求</p>
</li>
</ol>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"type"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"_method"</span> <span class="attr">value</span>=<span class="string">"PUT"</span>&gt;</span>**</span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">id</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="6-设置路由-动态批量注册"><a href="#6-设置路由-动态批量注册" class="headerlink" title="6. 设置路由-动态批量注册"></a>6. 设置路由-动态批量注册</h2><ol>
<li><p>基本格式<br> Route::rule([<br><br> ‘路由规则1’=&gt;’路由地址和参数’,<br><br> ‘路由规则2’=&gt;[‘路由地址和参数’,’匹配参数（数组）’,’变量规则（数组）’]<br><br> ],’’,’请求类型’,’匹配参数（数组）’,’变量规则’);<br></p>
</li>
<li><p>使用</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Route::rule([</span><br><span class="line">		<span class="string">"test"</span>=&gt;<span class="string">"index/index/test"</span>,</span><br><span class="line">		<span class="string">"course/:id"</span>=&gt;<span class="string">"index/index/course"</span></span><br><span class="line">	],<span class="string">''</span>,<span class="string">'get'</span>);</span><br><span class="line">	Route::get([</span><br><span class="line">		<span class="string">"test"</span>=&gt;<span class="string">"index/index/test"</span>,</span><br><span class="line">		<span class="string">"course/:id"</span>=&gt;<span class="string">"index/index/course"</span></span><br><span class="line">	]);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="7-设置路由-配置文件批量注册"><a href="#7-设置路由-配置文件批量注册" class="headerlink" title="7. 设置路由-配置文件批量注册"></a>7. 设置路由-配置文件批量注册</h2><ol>
<li> <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="string">"test"</span>=&gt;<span class="string">"index/index/test"</span>,</span><br><span class="line">    <span class="string">"course/:id"</span>=&gt;<span class="string">"index/index/course"</span>   </span><br><span class="line"> ];</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="8-变量规则"><a href="#8-变量规则" class="headerlink" title="8. 变量规则"></a>8. 变量规则</h2><ol>
<li> <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Route::rule('路由表达式','路由地址','请求类型','路由参数（数组）','变量规则（数组）');&lt;br&gt;</span></span><br><span class="line"><span class="comment">// 设置路由参数id必须是数字，必须1-3位&lt;br&gt;</span></span><br><span class="line">Route::rule(<span class="string">"course/:id"</span>,<span class="string">"index/index/course"</span>,<span class="string">'get'</span>,[],[<span class="string">'id'</span>=&gt;<span class="string">'\d&#123;1,3&#125;'</span>]);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="9-路由参数"><a href="#9-路由参数" class="headerlink" title="9. 路由参数"></a>9. 路由参数</h2><ol>
<li> <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Route::rule('路由表达式','路由地址','请求类型','路由参数（数组）','变量规则（数组）');&lt;br&gt;</span></span><br><span class="line">Route::rule(<span class="string">"course/:id"</span>,<span class="string">"index/index/course"</span>,<span class="string">'get'</span>,[<span class="string">'method'</span>=&gt;<span class="string">'get'</span>,<span class="string">'ext'</span>=&gt;<span class="string">'html'</span>],[<span class="string">'id'</span>=&gt;<span class="string">'\d&#123;1,3&#125;'</span>]);br&gt;</span><br><span class="line"><span class="comment">// 路由参数method 请求方式必须是get&lt;br&gt;</span></span><br><span class="line"><span class="comment">// 路由参数ext 主要设置路由的后缀</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><img src="http://ozp0vvyub.bkt.clouddn.com/blog/171121/mah977cBAh.jpg?imageslim" alt="mark"></p>
</li>
</ol>
<h2 id="10-资源路由"><a href="#10-资源路由" class="headerlink" title="10. 资源路由"></a>10. 资源路由</h2><ol>
<li>声明<br> Route::resource(‘blog’,’index/blog’);</li>
<li>会自动注册七个路由规则<br><img src="http://ozp0vvyub.bkt.clouddn.com/blog/171121/Gi36lB8CI5.jpg?imageslim" alt="mark"></li>
</ol>
<h2 id="11-设置快捷路由"><a href="#11-设置快捷路由" class="headerlink" title="11. 设置快捷路由"></a>11. 设置快捷路由</h2><ol>
<li><p>声明<br> Route::Controller(‘blog’,’index/blog’);</p>
</li>
<li><p>控制器中</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">app</span>\<span class="title">index</span>\<span class="title">controller</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Blog</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span>  <span class="title">getindex</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"我是bolg控制器index方法"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">geta</span><span class="params">()</span></span>&#123;</span><br><span class="line">        	<span class="keyword">echo</span> <span class="string">"AAAAAAAA"</span>;</span><br><span class="line">        	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li>URL访问<br> <a href="http://www.tp.com/blog/a" target="_blank" rel="noopener">http://www.tp.com/blog/a</a><br><br> <a href="http://www.tp.com/blog/index" target="_blank" rel="noopener">http://www.tp.com/blog/index</a><br></li>
</ol>
<h2 id="12-生成url地址"><a href="#12-生成url地址" class="headerlink" title="12. 生成url地址"></a>12. 生成url地址</h2><ol>
<li>系统类<br> dump(Url::build(‘index/index/index’));</li>
<li>系统方法<br> dump(url(‘index/index/index’));</li>
<li><p>使用</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">        <span class="comment">// 普通url地址</span></span><br><span class="line">    dump(Url::build(<span class="string">'index/index/index'</span>));</span><br><span class="line">    dump(url(<span class="string">'index/index/index'</span>));</span><br><span class="line">        <span class="comment">// 带参数url</span></span><br><span class="line">    dump(url(<span class="string">'index/index/abc'</span>,[<span class="string">'id'</span>=&gt;<span class="number">10</span>,<span class="string">'name'</span>=&gt;<span class="string">"张三"</span>]));</span><br><span class="line">    dump(url(<span class="string">'index/index/abc'</span>,<span class="string">'id=10&amp;name=100'</span>));</span><br><span class="line">    <span class="comment">// string(45) "/index/abc/id/10/name/%E5%BC%A0%E4%B8%89.html"</span></span><br><span class="line">    <span class="comment">// string(30) "/index/abc/id/10/name/100.html"</span></span><br><span class="line">        <span class="comment">// 带锚点</span></span><br><span class="line">    dump(url(<span class="string">'index/index/abc#name'</span>,[<span class="string">'id'</span>=&gt;<span class="number">10</span>,<span class="string">'name'</span>=&gt;<span class="string">"100"</span>]));</span><br><span class="line">    <span class="comment">// string(35) "/index/abc/id/10/name/100.html#name"</span></span><br><span class="line">        <span class="comment">// 带域名</span></span><br><span class="line">    dump(url(<span class="string">'index/index/abc#name@blog'</span>,[<span class="string">'id'</span>=&gt;<span class="number">10</span>,<span class="string">'name'</span>=&gt;<span class="string">"100"</span>]));</span><br><span class="line">    <span class="comment">// string(53) "http://blog.tp.com/index/abc/id/10/name/100.html#name"</span></span><br><span class="line">        <span class="comment">// 加入口文件</span></span><br><span class="line">    Url::root(<span class="string">'/index.php'</span>);</span><br><span class="line">    dump(url(<span class="string">'index/index/abc#name@blog'</span>,[<span class="string">'id'</span>=&gt;<span class="number">10</span>,<span class="string">'name'</span>=&gt;<span class="string">"100"</span>]));</span><br><span class="line">    <span class="comment">// string(63) "http://blog.tp.com/index.php/index/abc/id/10/name/100.html#name"</span></span><br><span class="line">```       </span><br><span class="line"></span><br><span class="line"><span class="comment"># 第5章 TP5.0 控制器</span></span><br><span class="line"><span class="comment">## 1. 新建控制器(前台模块为例)	</span></span><br><span class="line"><span class="number">1.</span> 在前台控制器目录下(C:\AppServ\www\tp5\application\index\controller) </span><br><span class="line">    新建控制器文件 User.php</span><br><span class="line"><span class="number">2.</span> User.php文件中如何书写</span><br><span class="line">    ```php</span><br><span class="line">    <span class="comment">// 声明命名空间</span></span><br><span class="line">    <span class="keyword">namespace</span> <span class="title">app</span>\<span class="title">index</span>\<span class="title">controller</span>;</span><br><span class="line">    <span class="comment">// 声明控制器</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    	<span class="comment">// 声明方法</span></span><br><span class="line">    	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">    		<span class="keyword">return</span> <span class="string">"我是User控制器下的index方法"</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>地址栏访问 <a href="http://www.tp.com/index.php/Index/user/index" target="_blank" rel="noopener">http://www.tp.com/index.php/Index/user/index</a></p>
</li>
<li>注意:<ol>
<li>控制器文件名必须首字母大写,文件名采用驼峰命名。</li>
<li>控制器名必须跟文件名一一对应</li>
<li>命名空间必须和文件名对应<br> namespace app\index\controller;<br> C:\AppServ\www\tp5\application\index\controller</li>
<li>如果控制器名字采用驼峰命名 UserInfo.php<br><a href="http://www.tp.com/index.php/Index/user_info/index" target="_blank" rel="noopener">http://www.tp.com/index.php/Index/user_info/index</a></li>
</ol>
</li>
</ol>
<h2 id="2-控制器如何加载页面"><a href="#2-控制器如何加载页面" class="headerlink" title="2. 控制器如何加载页面"></a>2. 控制器如何加载页面</h2><ol>
<li><p>系统View类</p>
</li>
<li><p>系统Controller类</p>
<ol>
<li><p>需要继承系统控制器类</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Controller</span>;</span><br><span class="line"><span class="comment">// 声明控制器</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>直接使用系统控制器类的方法<br><code>return $this-&gt;fetch();</code></p>
</li>
<li>系统函数<br> <code>return view();</code></li>
</ol>
</li>
</ol>
<h2 id="3-数据输出"><a href="#3-数据输出" class="headerlink" title="3. 数据输出"></a>3. 数据输出</h2><ol>
<li><p>在应用配置文件中可以设置数据返回格式</p>
<pre><code>&apos;default_return_type&apos;    =&gt; &apos;json&apos;, #默认是html
</code></pre></li>
<li><p>ajax请求的时候如何返回数据</p>
<pre><code>&apos;default_ajax_return&apos;    =&gt; &apos;json&apos;,
</code></pre></li>
</ol>
<h2 id="4-控制器的初始化"><a href="#4-控制器的初始化" class="headerlink" title="4. 控制器的初始化"></a>4. 控制器的初始化</h2><ol>
<li>控制器初始化方法必须继承系统控制器</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 控制器的初始化方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">_initialize</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">"我是初始化方法"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>只要调用控制器下的任意方法，都会先找初始化方法</li>
<li>控制器初始化方法的使用<ol>
<li>可以用来提取控制器下公共的代码</li>
<li>后台权限把控</li>
</ol>
</li>
</ol>
<h2 id="5-前置操作"><a href="#5-前置操作" class="headerlink" title="5.前置操作"></a>5.前置操作</h2><ol>
<li>前置方法 把一些公共的设置提取成方法进行调用</li>
<li>前置方法必须结合系统控制器</li>
<li>核心设置<pre><code>// 前置方法属性
protected $beforeActionList=[
    &apos;one&apos;,
    // 不想让谁使用前置方法two
    &apos;two&apos;=&gt;[&apos;except&apos;=&gt;&quot;index&quot;],
    // 仅仅可以让谁使用前置方法three
    &apos;three&apos;=&gt;[&apos;only&apos;=&gt;&apos;index&apos;],
];    
</code></pre></li>
</ol>
<h2 id="6-页面跳转"><a href="#6-页面跳转" class="headerlink" title="6.页面跳转"></a>6.页面跳转</h2><ol>
<li><p>页面跳转基于系统控制器类，所以控制器必须继承系统控制器</p>
</li>
<li><p>方法所在路径<br> C:\AppServ\www\tp5\thinkphp\library\traits\controlle\Jump.php</p>
</li>
<li><p>跳转方式</p>
<ol>
<li><p>成功跳转</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// $this-&gt;success(提示信息,跳转地址,用户自定义数据,跳转跳转,header信息);</span></span><br><span class="line"><span class="comment">// 跳转地址未设置时 默认返回上一个页面</span></span><br><span class="line"> <span class="keyword">$this</span>-&gt;success(<span class="string">'跳转成功'</span>,url(<span class="string">'index/index'</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p>失败跳转 <code>$this-&gt;error(&#39;登录失败&#39;);</code></p>
</li>
</ol>
</li>
<li><p>跳转方法给模板页面的数据</p>
<ol>
<li>$code 返回的状态码 成功 1 失败 0</li>
<li>$msg 页面的提示信息</li>
<li>$wait 等待时间</li>
<li>$url 制定跳转页面 默认返回上一个页面</li>
<li>$data 用户返回的数据</li>
</ol>
</li>
<li><p>相关配置文件</p>
<pre><code><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认跳转页面对应的模板文件</span></span><br><span class="line"><span class="string">'dispatch_success_tmpl'</span>  =&gt; THINK_PATH . <span class="string">'tpl'</span> . DS . <span class="string">'dispatch_jump.tpl'</span>,</span><br><span class="line"><span class="string">'dispatch_error_tmpl'</span>    =&gt; THINK_PATH . <span class="string">'tpl'</span> . DS . <span class="string">'dispatch_jump.tpl'</span>,</span><br></pre></td></tr></table></figure>
</code></pre></li>
<li><p>修改成功和失败的模板页面</p>
<ol>
<li>修改默认文件<ol>
<li>默认文件位置<br> C:\AppServ\www\tp5\thinkphp\tpl\dispatch_jump.php</li>
<li>根据原有代码进行修改<br> 在成功失败模板页面进行修改</li>
</ol>
</li>
<li>用户自定义页面跳转模板<ol>
<li>修改配置文件<br> ‘dispatch_success_tmpl’  =&gt; THINK_PATH . ‘tpl’ . DS . ‘success.tpl’,<br> ‘dispatch_error_tmpl’    =&gt; THINK_PATH . ‘tpl’ . DS . ‘error.tpl’,</li>
<li>在系统模板目录下 (C:\AppServ\www\tp5\thinkphp\tpl) 新建 success.php 和error.php</li>
</ol>
</li>
<li>自定义书写跳转页面 可以用bootstrap</li>
</ol>
</li>
</ol>
<h2 id="7-重定向"><a href="#7-重定向" class="headerlink" title="7.重定向"></a>7.重定向</h2><ol>
<li>作用：重定向(Redirect)就是通过各种方法将各种网络请求重新定个方向转到其它位置</li>
<li>使用:<pre><code>redirect(&apos;跳转地址&apos;,&apos;其他参数&apos;,code,&apos;隐士参数&apos;);
$this-&gt;redirect(&apos;index/index&apos;,[&apos;id&apos;=&gt;100,&apos;name&apos;=&gt;&apos;abc&apos;]);
</code></pre></li>
</ol>
<h2 id="8-空控制器和空操作"><a href="#8-空控制器和空操作" class="headerlink" title="8.空控制器和空操作"></a>8.空控制器和空操作</h2><ol>
<li>空操作</li>
</ol>
<figure class="highlight php"><figcaption><span># 主要解决一些用户恶意的地址栏输入，报错影响交互</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">_empty</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">$this</span>-&gt;redirect(<span class="string">'index/index'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><p>空控制器</p>
  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明命名空间</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">app</span>\<span class="title">index</span>\<span class="title">controller</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Controller</span>;</span><br><span class="line"><span class="comment">// 声明控制器</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Error</span> <span class="keyword">extends</span> <span class="title">Controller</span></span>&#123;</span><br><span class="line">	<span class="comment">// index</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">$this</span>-&gt;redirect(<span class="string">'index/index'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 空操作</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">_empty</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">$this</span>-&gt;redirect(<span class="string">'index/index'</span>);		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意:<br> 1、网站上线的时候每一个控制器都必须添加空操作<br> 2、不论前台后台都需要写一个空控制器</p>
</li>
</ol>
<h2 id="9-使用命令行"><a href="#9-使用命令行" class="headerlink" title="9.使用命令行"></a>9.使用命令行</h2><ol>
<li>切换到网站的根目录下</li>
<li>输入php think</li>
<li>使用<ol>
<li>创建控制器<pre><code>php think make:controller app\index\controller\Goods
</code></pre></li>
<li>创建数据模型<pre><code>php think make:model app\index\model\Goods
</code></pre></li>
<li>清空runtime 临时文件<pre><code>php think clear
</code></pre></li>
</ol>
</li>
</ol>
<h2 id="10-资源控制器"><a href="#10-资源控制器" class="headerlink" title="10.资源控制器"></a>10.资源控制器</h2><ol>
<li>使用命令行创建控制器<pre><code>php think make:controller app\index\controller\Goods
</code></pre></li>
<li>资源控制器一般配合资源路由使用</li>
</ol>
<h1 id="第6章-TP5-0-请求和响应"><a href="#第6章-TP5-0-请求和响应" class="headerlink" title="第6章 TP5.0 请求和响应"></a>第6章 TP5.0 请求和响应</h1><h2 id="1-系统类-C-AppServ-www-tp5-thinkphp-library-think"><a href="#1-系统类-C-AppServ-www-tp5-thinkphp-library-think" class="headerlink" title="1.系统类(C:\AppServ\www\tp5\thinkphp\library\think)"></a>1.系统类(C:\AppServ\www\tp5\thinkphp\library\think)</h2><ul>
<li>Config</li>
<li>Controller</li>
<li>Env</li>
<li>Route</li>
<li>Url</li>
<li>View</li>
<li>Request </li>
</ul>
<h2 id="2-系统方法-C-AppServ-www-tp5-thinkphp-helper-php"><a href="#2-系统方法-C-AppServ-www-tp5-thinkphp-helper-php" class="headerlink" title="2.系统方法(C:\AppServ\www\tp5\thinkphp\helper.php)"></a>2.系统方法(C:\AppServ\www\tp5\thinkphp\helper.php)</h2><ul>
<li>dump();  格式化输出</li>
<li>controller(); 调用控制器</li>
<li>action(); 调用方法</li>
<li>config(); 读取和设置配置文件</li>
<li>url(); 生成URL地址</li>
<li>view(); 加载页面</li>
<li>request(); 实例化 Request类</li>
</ul>
<h2 id="3-如何获取请求类"><a href="#3-如何获取请求类" class="headerlink" title="3.如何获取请求类"></a>3.如何获取请求类</h2><ol>
<li>系统函数<br> $request=request();</li>
<li>系统Request类</li>
</ol>
<figure class="highlight php"><figcaption><span>use think\Request;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 因为Request类属于单例模式 所以 不能直接new</span></span><br><span class="line">  		$request=Request::instance();</span><br></pre></td></tr></table></figure>
<ol>
<li>系统Request类</li>
</ol>
<figure class="highlight php"><figcaption><span>use think\Request;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法的书写</span></span><br><span class="line">  		<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span><span class="params">(Request $request)</span></span></span><br><span class="line"><span class="function">  		</span>&#123;</span><br><span class="line">  			dump($request);</span><br><span class="line">  		&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-获取用户请求信息"><a href="#4-获取用户请求信息" class="headerlink" title="4.获取用户请求信息"></a>4.获取用户请求信息</h2><ol>
<li>获取域名<br>dump($request-&gt;domain());</li>
<li>获取URL地址 除域名以外<br>dump($request-&gt;url());</li>
<li>获取入口文件<br>dump($request-&gt;baseFile());</li>
<li>获取PathInfo路径<br>dump($request-&gt;pathinfo());</li>
<li>获取PATHINFO路径 无后缀<br>dump($request-&gt;path());</li>
<li>url地址伪静态后缀<br>dump($request-&gt;ext());</li>
<li>伪静态<br>就是将路径伪装成静态页面，让搜索引擎更好收录网站，防止别人知道网站真实开发语言</li>
</ol>
<h2 id="5-获取请求模块-控制器-方法"><a href="#5-获取请求模块-控制器-方法" class="headerlink" title="5.获取请求模块\控制器\方法"></a>5.获取请求模块\控制器\方法</h2><ol>
<li>控制器<pre><code>$request-&gt;controller();
</code></pre></li>
<li>方法<pre><code>$request-&gt;action();
</code></pre></li>
<li>模块<pre><code>$request-&gt;module();
</code></pre></li>
</ol>
<h2 id="6-获取请求相关类型"><a href="#6-获取请求相关类型" class="headerlink" title="6.获取请求相关类型"></a>6.获取请求相关类型</h2><ol>
<li><p>请求类型<br> $request-&gt;method();</p>
</li>
<li><p>请求资源类型<br> $request-&gt;type();</p>
</li>
<li><p>访问地址<br> $request-&gt;ip();</p>
</li>
<li><p>是否ajax请求<br> $request-&gt;isAjax();</p>
</li>
<li><p>获取所有地址栏参数<br> $request-&gt;param();</p>
</li>
<li><p>获取特定字段<br> $request-&gt;only([‘name’,’id’]);</p>
</li>
<li><p>剔除字段<br> $request-&gt;except([‘name’,’id’]);</p>
</li>
</ol>
<h2 id="7-获取变量"><a href="#7-获取变量" class="headerlink" title="7.获取变量"></a>7.获取变量</h2><ol>
<li><p>判断是否存在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dump($request-&gt;has(&apos;id&apos;,&apos;get&apos;));</span><br><span class="line">dump(input(&apos;get.id&apos;));</span><br></pre></td></tr></table></figure>
</li>
<li><p>读取变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dump($request-&gt;get(&apos;id&apos;));</span><br><span class="line">dump(input(&apos;get.id&apos;));</span><br><span class="line">dump($request-&gt;get());</span><br><span class="line">dump(input(&apos;get.&apos;));</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以读取数据类型<br> get、post、delete、put、session、cookie、server 等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$request-&gt;get();</span><br><span class="line">$request-&gt;post();</span><br><span class="line">$request-&gt;put();</span><br><span class="line">$request-&gt;server();</span><br><span class="line">$request-&gt;request();</span><br><span class="line">$request-&gt;session();</span><br><span class="line">$request-&gt;cookie();</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="8-变量的过滤"><a href="#8-变量的过滤" class="headerlink" title="8.变量的过滤"></a>8.变量的过滤</h2><ol>
<li><p>作用<br> 防止恶意输入、防止sql注入</p>
</li>
<li><p>使用</p>
<ol>
<li><p>全部的数据进行过滤    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 单个方法过滤</span><br><span class="line">$request-&gt;filter(&quot;htmlspecialchars&quot;);</span><br><span class="line">// 多种方法过滤</span><br><span class="line">$request-&gt;filter([&quot;htmlspecialchars&quot;,&quot;strip_tags&quot;]);</span><br></pre></td></tr></table></figure>
</li>
<li><p>针对变量过滤     </p>
<pre><code>`$request-&gt;get(&apos;name&apos;,&apos;&apos;,&apos;htmlspecialchars&apos;);`
</code></pre></li>
<li><p>密码过滤之后加密</p>
<pre><code>`dump($request-&gt;get(&apos;pass&apos;,&apos;&apos;,&apos;htmlspecialchars,md5&apos;));`
</code></pre></li>
</ol>
</li>
</ol>
<h2 id="9-变量的排除和获取"><a href="#9-变量的排除和获取" class="headerlink" title="9.变量的排除和获取"></a>9.变量的排除和获取</h2><ol>
<li><p>获取</p>
<pre><code>$request-&gt;only(&apos;name&apos;);
$request-&gt;only(&apos;name&apos;,get);
$request-&gt;only([&apos;name&apos;,&apos;pass&apos;],get);
</code></pre></li>
<li><p>排除</p>
<pre><code>$request-&gt;except([&apos;name&apos;,&apos;pass&apos;],get);
$request-&gt;except([&apos;name&apos;,&apos;pass&apos;]);
$request-&gt;except(&apos;name&apos;);
</code></pre></li>
</ol>
<h2 id="10-变量修饰符"><a href="#10-变量修饰符" class="headerlink" title="10.变量修饰符"></a>10.变量修饰符</h2><ol>
<li><p>修饰变量的类型</p>
<ul>
<li>s 字符串</li>
<li>d 整形</li>
<li>f 浮点型</li>
<li>a 数组</li>
<li>b 布尔型</li>
</ul>
</li>
<li><p>使用</p>
<pre><code>dump(input(&apos;get.id/d&apos;)); // 强制转换整形

dump($request-&gt;get(&apos;id/d&apos;));
</code></pre></li>
</ol>
<h2 id="11-更改变量"><a href="#11-更改变量" class="headerlink" title="11.更改变量"></a>11.更改变量</h2><pre><code>// 地址栏访问 http://www.tp.com/index.php/Index/Index/xiugai?id=10
dump($request-&gt;get(&apos;id&apos;));  // 10
dump($request-&gt;get([&apos;id&apos;=&gt;20]));  //数组
dump($request-&gt;get(&apos;id&apos;));  // 20
</code></pre><h2 id="12-请求类型判断"><a href="#12-请求类型判断" class="headerlink" title="12.请求类型判断"></a>12.请求类型判断</h2><ol>
<li><p>系统类</p>
<pre><code>// 判断是否是get请求
dump($request-&gt;isGet());
// 判断是否是手机端
dump($request-&gt;isMobile());
</code></pre></li>
<li><p>系统函数</p>
<pre><code>dump(request()-&gt;isGet());
dump(request()-&gt;isMobile());
</code></pre></li>
</ol>
<h2 id="13-模拟put、delete请求"><a href="#13-模拟put、delete请求" class="headerlink" title="13.模拟put、delete请求"></a>13.模拟put、delete请求</h2><ol>
<li><p>使用</p>
<pre><code>&lt;form action=&quot;{:url(&apos;type&apos;)}&quot; method=&quot;post&quot;&gt;
    &lt;p&gt;
        User:
        &lt;input type=&quot;text&quot; name=&quot;name&quot; id=&quot;&quot;&gt;
        &lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;PUT&quot;&gt;
    &lt;/p&gt;
    &lt;p&gt;
        Pass:
        &lt;input type=&quot;password&quot; name=&quot;pass&quot; id=&quot;&quot;&gt;
    &lt;/p&gt;
    &lt;p&gt;
        &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;
    &lt;/p&gt;
&lt;/form&gt;
</code></pre></li>
<li><p>注意</p>
<ol>
<li>表单的请求类型必须是post</li>
<li>需要设置隐藏域传递模拟请求类型</li>
</ol>
</li>
</ol>
<h2 id="14-模拟ajax请求和PJAX请求"><a href="#14-模拟ajax请求和PJAX请求" class="headerlink" title="14.模拟ajax请求和PJAX请求"></a>14.模拟ajax请求和PJAX请求</h2><ol>
<li><p>模拟ajax请求</p>
<pre><code>http://www.tp.com/index.php/index/index/type?_ajax=10
</code></pre></li>
<li><p>模拟pjax请求</p>
<pre><code>http://www.tp.com/index.php/index/index/type?_pjax=10
</code></pre></li>
</ol>
<h2 id="15-伪静态"><a href="#15-伪静态" class="headerlink" title="15.伪静态"></a>15.伪静态</h2><ol>
<li><p>作用</p>
<ol>
<li>URL伪静态通常是为了满足更好的SEO效果</li>
<li>为了网站的安全</li>
</ol>
</li>
<li><p>修改伪静态</p>
<pre><code>在配置文件中进行修改
&apos;url_html_suffix&apos;        =&gt; &apos;shtml&apos;,
</code></pre></li>
<li><p>获取当前的伪静态后缀</p>
<pre><code>$request-&gt;ext();
</code></pre></li>
</ol>
<h2 id="16-参数绑定"><a href="#16-参数绑定" class="headerlink" title="16.参数绑定"></a>16.参数绑定</h2><ol>
<li><p>使用</p>
<pre><code>public function banding($id,$name=&quot;admin&quot;){
    dump($id);
    dump($name);
}

http://www.tp.com/index.php/index/index/banding/id/1/name/user
</code></pre></li>
<li><p>注意</p>
<ol>
<li>参数绑定的个数，少于地址栏参数的个数</li>
<li>参数绑定的名字，必须和地址栏参数名字一一对应</li>
<li>参数绑定可以设置默认值</li>
</ol>
</li>
</ol>
<h1 id="第7章-TP5-0数据库操作"><a href="#第7章-TP5-0数据库操作" class="headerlink" title="第7章 TP5.0数据库操作"></a>第7章 TP5.0数据库操作</h1><h2 id="1-TP5-0-支持数据库类型"><a href="#1-TP5-0-支持数据库类型" class="headerlink" title="1. TP5.0 支持数据库类型"></a>1. TP5.0 支持数据库类型</h2><p>Mysql、SqlServer、PgSQL、Sqlite等数据库的支持。</p>
<h2 id="2-如何连接数据库"><a href="#2-如何连接数据库" class="headerlink" title="2. 如何连接数据库"></a>2. 如何连接数据库</h2><ol>
<li><p>配置文件定义</p>
<ol>
<li>配置文件目录 C:\AppServ\www\tp5\application\database.php</li>
<li><p>如何配置</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="comment">// 数据库类型</span></span><br><span class="line">    <span class="string">'type'</span>            =&gt; <span class="string">'mysql'</span>,</span><br><span class="line">    <span class="comment">// 服务器地址</span></span><br><span class="line">    <span class="string">'hostname'</span>        =&gt; <span class="string">'127.0.0.1'</span>,</span><br><span class="line">    <span class="comment">// 数据库名</span></span><br><span class="line">    <span class="string">'database'</span>        =&gt; <span class="string">'yzmedu'</span>,</span><br><span class="line">    <span class="comment">// 用户名</span></span><br><span class="line">    <span class="string">'username'</span>        =&gt; <span class="string">'root'</span>,</span><br><span class="line">    <span class="comment">// 密码</span></span><br><span class="line">    <span class="string">'password'</span>        =&gt; <span class="string">'123456789'</span>,</span><br><span class="line">    <span class="comment">// 端口</span></span><br><span class="line">    <span class="string">'hostport'</span>        =&gt; <span class="string">'3306'</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
</li>
<li><p>如何使用</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实例化系统数据库类</span></span><br><span class="line"> $DB=<span class="keyword">new</span> Db;</span><br><span class="line"><span class="comment">// 查询数据</span></span><br><span class="line">$data=$DB::table(<span class="string">"user"</span>)-&gt;select();</span><br><span class="line"> <span class="comment">// 使用sql语句</span></span><br><span class="line">$data=$DB::query(<span class="string">"select * from user"</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>方法配置</p>
<ol>
<li><p>使用数组</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$Db=Db::connect([</span><br><span class="line">   					<span class="comment">// 数据库类型</span></span><br><span class="line">   					<span class="string">'type'</span>            =&gt; <span class="string">'mysql'</span>,</span><br><span class="line">   					<span class="comment">// 服务器地址</span></span><br><span class="line">   					<span class="string">'hostname'</span>        =&gt; <span class="string">'127.0.0.1'</span>,</span><br><span class="line">   					<span class="comment">// 数据库名</span></span><br><span class="line">   					<span class="string">'database'</span>        =&gt; <span class="string">'yzmedu2'</span>,</span><br><span class="line">   					<span class="comment">// 用户名</span></span><br><span class="line">   					<span class="string">'username'</span>        =&gt; <span class="string">'root'</span>,</span><br><span class="line">   					<span class="comment">// 密码</span></span><br><span class="line">   					<span class="string">'password'</span>        =&gt; <span class="string">'123456789'</span>,</span><br><span class="line">   					<span class="comment">// 端口</span></span><br><span class="line">   					<span class="string">'hostport'</span>        =&gt; <span class="string">'3306'</span>,</span><br><span class="line">   </span><br><span class="line">   				]);</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用字符串</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$Db=Db::connect(<span class="string">"mysql://root:123456789@127.0.0.1:3306/yzmedu#utf8"</span>);</span><br><span class="line"><span class="comment">// 数据库类型://用户名:密码@数据库地址:数据库端口/数据库名#字符集</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如何使用 <code>$data=$Db-&gt;table(&quot;user&quot;)-&gt;select();</code></p>
</li>
</ol>
</li>
<li><p>模型类定义</p>
<ol>
<li>创建数据模型<ol>
<li>命令行创建<ul>
<li>切换到项目目录</li>
<li>执行命令 php think make:model app\index\model\User</li>
</ul>
</li>
<li>手动创建<ul>
<li>打开数据模型目录        C:\AppServ\www\tp5\application\index\model</li>
<li>在目录下新建 文件 User.php</li>
<li>在文件中书写代码<pre><code>namespace app\index\model;
use think\Model;
class User extends Model
</code></pre></li>
</ul>
</li>
</ol>
</li>
<li></li>
</ol>
</li>
</ol>
<h1 id="第八章-模型"><a href="#第八章-模型" class="headerlink" title="第八章 模型"></a>第八章 模型</h1><h1 id="第8章-TP5-0-模型"><a href="#第8章-TP5-0-模型" class="headerlink" title="第8章 TP5.0 模型"></a>第8章 TP5.0 模型</h1><p>今日学习</p>
<p>1、模型(model)</p>
<pre><code>数据模型
</code></pre><p>2、新建数据模型</p>
<pre><code>1) 手动新建

    a、打开前台模块(C:\AppServ\www\tp5\application\index)

        新建model目录

    b、在model目录下 新建 User.php

        // 声明命名空间
        namespace app\index\model;

        // 导入系统的数据模型

        use think\Model;

        // 声明user模型

        class User extends Model{

        }

2) 命令新建

    1) 切换到项目目录

        php think make:model app\index\model\Users


3) 注意

    1、数据模型的名字 建议大家跟数据库名一致

    2、如果数据库名字和模型名不一致 可以设置表名

        protected $table=&quot;&quot;;

    3、如果表名(yzm_user),数据模型名 (YzmUser)
</code></pre><p>3、模型的实例化</p>
<pre><code>1、调用静态方法

    $res=User::get(1);
    dump($res-&gt;toArray());

2、实例化数据模型

    $user=new User();
    $res=$user::get(2);
    dump($res-&gt;toArray());

3、使用loader

    $user=Loader::model(&quot;user&quot;);
    $res=$user::get(3);
    dump($res-&gt;toArray());

4、使用助手函数

    $user=model(&quot;user&quot;);
    $res=$user::get(4);
    dump($res-&gt;toArray());
</code></pre><p>4、查询操作</p>
<pre><code>1、单条数据

    // get方法
        // 使用数字
        $res=User::get(1); // 默认主键
        // 使用数组
        $res=User::get([&quot;name&quot;=&gt;&apos;yzmedu3&apos;]);  // 默认查找用户名

        // 使用闭包函数
        $res=User::get(function($query){
            $query-&gt;where(&quot;id&quot;,15);
        });
    // find方法

        $res=User::where(&quot;id&quot;,13)-&gt;find();

2、查询多条数据

    // all
        // 所有数据
        $res=User::all();

        // 字符串
        $res=User::all(&quot;1,2,3&quot;);

        // 数组
        $res=User::all([5,6,7]);

        // 数组

        $res=User::all([&apos;pass&apos;=&gt;&apos;123&apos;]);

        // 闭包

        $res=User::all(function($query){
            $query-&gt;where(&quot;pass&quot;,&quot;123&quot;)
                -&gt;whereOr(&quot;pass&quot;,&quot;456&quot;)
                -&gt;order(&quot;id&quot;,&quot;desc&quot;);
        });

    // select 和 all 基本类似

        $res=User::select();
        $res=User::limit(2)-&gt;select();

3、获取某个字段和某列值

    // 获取某个值
    $res=User::where(&quot;id&quot;,5)-&gt;value(&quot;name&quot;);

    // 获取某列值

    $res=User::column(&quot;name&quot;,&quot;id&quot;);

4、动态查询
    // 查询出匹配到的第一条数据
    // getBy字段名
    $res=User::getByAge(&apos;44&apos;);
    dump($res-&gt;toArray());
</code></pre><p>5、增加操作</p>
<pre><code>1、设置属性
    $user=new User();
    $user-&gt;name=&quot;yzmedu21&quot;;
    $user-&gt;pass=&quot;abc&quot;;
    $user-&gt;age=18;
    // 返回影响行数
    $user-&gt;save();

2、通过data方法
    $user=new User();

    $user-&gt;data([
        &quot;name&quot;=&gt;&quot;yzmedu22&quot;,
        &quot;age&quot;=&gt;&quot;22&quot;,
        &quot;pass&quot;=&gt;&quot;qwe&quot;,
        ]);

    // 返回影响行数
    $user-&gt;save();

3、实例化时

    $user=new User([
        &quot;name&quot;=&gt;&quot;yzmedu23&quot;,
        &quot;pass&quot;=&gt;&apos;zxc&apos;,
        &quot;age&quot;=&gt;20
        ]);
    // 返回影响行数
    $user-&gt;save();
    // allowField 屏蔽掉数据库中不存在的字段
    $user-&gt;allowField(true)-&gt;save();
    // 指定插入数据库的字段
    $user-&gt;allowField([&apos;name&apos;,&apos;age&apos;])-&gt;save();

4、获取自增的ID
    // 获取插入数据ID
    echo $user-&gt;id;

5、增加多条数据

    $user=new User();

    $list=[
        [&apos;name&apos;=&gt;&quot;yzmedu33&quot;,&quot;age&quot;=&gt;33],
        [&apos;name&apos;=&gt;&quot;yzmedu34&quot;,&quot;age&quot;=&gt;34]

    ];

    $user-&gt;saveAll($list);

6、create方法
    $user=User::create([
        &quot;name&quot;=&gt;&quot;yzmedu35&quot;,
        &quot;age&quot;=&gt;35
        ]);
</code></pre><p>6、删除操作</p>
<pre><code>// $user=User::get(1);
// 返回影响行数
// dump($user-&gt;delete());

// 删除主键2
$user=User::destroy(2);

// 删除主键3,4,5
$user=User::destroy(&quot;3,4,5&quot;);
$user=User::destroy([6,7,8]);

// 删除name

$user=User::destroy([&apos;name&apos;=&gt;&quot;yzmedu23&quot;]);

// 删除多个条件

$user=User::destroy([&apos;name&apos;=&gt;&apos;yzmedu33&apos;,&apos;age&apos;=&gt;33]);

// 使用闭包

$user=User::destroy(function($query){

    $query-&gt;where(&quot;id&quot;,&quot;&lt;&quot;,&quot;15&quot;);
});

// 删除数据

$user=User::where(&quot;id&quot;,&quot;&gt;&quot;,&quot;19&quot;)-&gt;delete();

dump($user);
</code></pre><p>7、修改操作</p>
<pre><code>// 设置字段更新数据

    $user=User::get(15);

    $user-&gt;age=19;

    $res=$user-&gt;save();

// 直接数组修改

    $user=new User;

    $res=$user-&gt;save(
        [
            &quot;pass&quot;=&gt;&quot;qweasd&quot;,
            &quot;age&quot;=&gt;16,

        ],[&quot;id&quot;=&gt;16]);

// 修改数据

    $_POST[&apos;name&apos;]=&quot;yzmedu55&quot;;
    $_POST[&apos;pass&apos;]=&quot;pass55&quot;;
    $_POST[&apos;age&apos;]=&quot;55&quot;;
    $_POST[&apos;sex&apos;]=&quot;nan&quot;;
    $_POST[&apos;id&apos;]=17;

    $user=new User;

    $res=$user-&gt;allowField([&apos;name&apos;,&apos;pass&apos;,&apos;age&apos;])-&gt;save($_POST,[&apos;id&apos;=&gt;17]);

// 批量更新


    $data=[
        [&apos;id&apos;=&gt;15,&apos;name&apos;=&gt;&quot;abc&quot;,&apos;pass&apos;=&gt;456],
        [&apos;id&apos;=&gt;17,&apos;name&apos;=&gt;&quot;abc&quot;,&apos;pass&apos;=&gt;456],
    ];

    $user=new User;

    $res=$user-&gt;saveAll($data);

    echo User::getLastSql();

// 更新操作

    $user=new User;

    $res=$user-&gt;where(&quot;id&quot;,&apos;&gt;&apos;,&apos;17&apos;)-&gt;update([&apos;age&apos;=&gt;18]);

    $res=User::where(&quot;id&quot;,&quot;&lt;&quot;,&quot;18&quot;)-&gt;update([&apos;pass&apos;=&gt;&apos;zxc&apos;]);

// 闭包更新数据

    $user=new User;

    $res=$user-&gt;save([&apos;name&apos;=&gt;&apos;yunzhimeng&apos;],function($query){
        $query-&gt;where(&quot;id&quot;,&quot;15&quot;);
    });
</code></pre><p>8、聚合</p>
<pre><code>// 统计数据条数
$tot=User::count();

dump($tot);

// 条件判断
$tot=User::where(&quot;age&quot;,&quot;&gt;&quot;,18)-&gt;count();
dump($tot);

// 统计最大值

$max=User::max(&apos;age&apos;);

dump($max);

// 统计最小值

$min=User::min(&quot;age&quot;);

dump($min);

// 平均值
$avg=User::avg(&apos;age&apos;);

dump($avg);

// 求和
$sum=User::sum(&apos;age&apos;);
dump($sum);
</code></pre><p>9、获取器</p>
<pre><code>1、数据模型

    // sex 的获取器
    public function getSexAttr($val){
        switch ($val) {
            case &apos;0&apos;:
                return &quot;未知&quot;;
                break;
            case &quot;1&quot;:
                return &quot;男&quot;;
                break;
            case &quot;2&quot;:
                return &quot;女&quot;;
                break;
        }
    }


2、控制器

    // 获取ID为15 的数据
    $user=User::get(17);

    // 经过获取器的操作
    dump($user-&gt;toArray()); 
    dump($user-&gt;sex);

    // 不经过获取器处理
    dump($user-&gt;getData());


3、注意

    1、如果字段 user_status 修改器名字getUserStatusAttr
    2、如果字段 status 修改器名字getStatusAttr
</code></pre><p>10、修改器<br>    1、数据模型</p>
<pre><code>    // 用户密码的修改器

    public function setPassAttr($val){

        return md5($val);
    }


2、控制器

    // 修改 ID 为15 的密码

    $user=new User();

    // 密码会实现自动加密
    $res=$user-&gt;save([&apos;pass&apos;=&gt;&apos;456&apos;],[&apos;id&apos;=&gt;15]);

    dump($res);


3、注意

    1、修改器的触发条件是 save方法
</code></pre><p>11、自动完成</p>
<pre><code>1、修改器和自动完成区别

    修改器:数据赋值的时候自动进行转换处理
    自动完成:没有手动赋值的情况下进行手动处理

2、自动完成

    // 增加和修改操作都会执行
    protected $auto=[];
    // 创建数据执行
    protected $insert=[&apos;create_time&apos;];
    // 修改数据执行
    protected $update=[&apos;update_time&apos;];
</code></pre><p>12、时间戳</p>
<pre><code>1、系统支持自动写入创建和更新的时间戳字段
    1) 在配置文件中设置
        // 自动写入时间戳字段
        &apos;auto_timestamp&apos;  =&gt; true,

    2) 在数据模型中设置

        // 设置自动写入时间戳
        protected $autoWriteTimestamp=true;

2、可以设置字段默认值

    // 增加时间的字段
    protected $createTime=&apos;create_times&apos;;
    // 更新时间的字段
    protected $updateTime=&apos;update_times&apos;;

3、取消更新时间戳设置

    protected $updateTime=false;
</code></pre><p>14、软删除</p>
<pre><code>1、作用：

    实现假删除，可以进行恢复

2、实现

    &lt;?php 
        // 声明命名空间
        namespace app\index\model;
        // 导入系统的数据模型
        use think\Model;
        // 配合软删除
        use traits\model\SoftDelete;
        // 声明user模型
        class User extends Model{
            // 使用软删除
            use SoftDelete;
            // 设置删除的时间戳
            protected $deleteTime=&quot;delete_times&quot;;

        }

3、控制器   


    1、删除数据

        $res=User::destroy(15);

    2、获取数据

        $res=User::get(15);
        // 软删除 数据库数据存在，但是get获取不到

    3、直接删除数据

        $res=User::destroy(14,true);

        $user=new User();

        $res=$user-&gt;where(&quot;id&quot;,&apos;5&apos;)-&gt;delete();

    4、读取所有数据包含软删除数据

        $res=User::withTrashed()-&gt;find(15);
        $res=User::withTrashed()-&gt;select();

    5、仅仅读取软删除数据

        $res=User::onlyTrashed()-&gt;select();
        $res=User::onlyTrashed()-&gt;find(1);
</code></pre><p>第八章 shop案例出现的各种问题<br>1.自动生成目录结构<br>1.位置   D:\wamp\www\shop\build.php<br>2.规则<br>      ○ <strong>dir</strong> 表示生成目录（支持多级目录）<br>      ○ <strong>file</strong> 表示生成文件（不定义默认会生成 config.php 文件）<br>      ○ controller 表示生成controller类<br>      ○ model表示生成model类<br>      ○ view表示生成html文件（支持子目录）<br>example:</p>
<p>3.命令行生成</p>
<blockquote>
<p>php think build  //默认会读取应用目录application下面的build.php 作为自动生成的定义文件<br>php think build –config build.php  //表示读取根目录下的build.php文件</p>
</blockquote>
<p>2.Validate<br>1.ThinkPHP5.0验证使用独立的\think\Validate类或者验证器进行验证。<br>2.用法：<br>1.</p>
<p>2.</p>
<p>3.方法在\www\shop\thinkphp\library\think\Validate.php中</p>
<p>3.百度地图<br>1.根据地址获取经纬度类的封装<br>开发—web服务开发找到geocoding api</p>
<p>2.根据经纬度地址调取百度地图</p>
<p>3.用法：<br>1.设置参数（www\shop\application\extra\map.php</p>
<p>2.写获取URL的相关方法：（www\shop\application\common.php</p>
<p>3.根据地址获取经纬度类的封装（D:\wamp\www\shop\extend\Map.php</p>
<p>4.根据经纬度地址调取百度地图</p>
<p>5.调用（www\shop\application\index\controller\Index.php</p>
<p>6.在模板中调用</p>
<p>4.利用phpmailer发送邮件<br>1.下载phpmailer.zip<br>2.创建phpmailer文件夹（在extend下</p>
<p>3.新建Email.php（方法内写test参数</p>
<p>4.调用<br>\phpmailer\Email::send(参数);<br>5.上传图片<br>1.下载uploadity.zip<br>2.编写image.js</p>

      
    </div>
    <footer class="article-footer">
      <div class="article-footer-content">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

        <a data-url="http://test.xxgail.cn/2017/11/20/ThinkPHP5.0笔记/" data-id="cjgfwp2ty000mostak1wvcjho" class="article-share-link">Share</a>
        
      </div>
    </footer>
  </div>
  </div>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/11/20/摘-抄/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          摘.抄
        
      </div>
    </a>
  
  
    <a href="/2017/11/20/CodeIgniter笔记/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">CodeIgniter笔记</div>
    </a>
  
</nav>

  
</article>


</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/04/26/MySQL错误解决方案/">MySQL错误解决方案</a>
          </li>
        
          <li>
            <a href="/2018/01/25/Linux服务器的购买与使用/">Linux服务器的购买与使用</a>
          </li>
        
          <li>
            <a href="/2018/01/22/Linux命令/">Linux命令</a>
          </li>
        
          <li>
            <a href="/2018/01/10/Redis/">Redis</a>
          </li>
        
          <li>
            <a href="/2017/12/21/WampServer/">WampServer</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/app/">app</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nosql/">nosql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/命令行/">命令行</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/摘抄/">摘抄</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/服务器/">服务器</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/框架/">框架</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读书/">读书</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件/">软件</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">7</span></li></ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 xxGail<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/sun11/hexo-theme-paperbox" target="_blank">Paperbox</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
  <a href="#search" class="mobile-nav-link st-search-show-outputs">Search</a>
</nav>
  

<!-- totop start -->
<div id="totop">
	<a title="To Top"></a>
</div>
<!-- totop end -->

<!-- swiftype search start -->

<!-- swiftype search end -->



<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/lrsjng.jquery-qrcode/0.12.0/jquery.qrcode.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

</div>
</body>
</html>
