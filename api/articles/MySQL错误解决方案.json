{"title":"MySQL错误解决方案","slug":"MySQL错误解决方案","date":"2018-04-26T01:52:37.000Z","updated":"2018-04-26T07:28:57.587Z","comments":true,"path":"api/articles/MySQL错误解决方案.json","photos":[],"link":"","excerpt":"MySQL是世界上最好的SQL。(一本正经<br>","covers":null,"content":"<p>MySQL是世界上最好的SQL。(一本正经<br><a id=\"more\"></a></p>\n<h2 id=\"1-MySql-Host-is-blocked-because-of-many-connection-errors-unblock-with-‘mysqladmin-flush-hosts’-解决方法\"><a href=\"#1-MySql-Host-is-blocked-because-of-many-connection-errors-unblock-with-‘mysqladmin-flush-hosts’-解决方法\" class=\"headerlink\" title=\"1.MySql Host is blocked because of many connection errors; unblock with ‘mysqladmin flush-hosts’ 解决方法\"></a>1.MySql Host is blocked because of many connection errors; unblock with ‘mysqladmin flush-hosts’ 解决方法</h2><ul>\n<li>环境：linux，mysql5.6</li>\n<li>软件: Navicat</li>\n<li>错误：Host is blocked because of many connection errors; unblock with ‘mysqladmin flush-hosts’</li>\n<li>原因:　同一个ip在短时间内产生太多（超过mysql数据库max_connection_errors的最大值）中断的数据库连接而导致的阻塞；</li>\n<li>解决方法：</li>\n</ul>\n<ol>\n<li>提高允许的max_connection_errors数量（治标不治本）：<ul>\n<li>进入Mysql数据库查看max_connection_errors： show variables like ‘%max_connection_errors%’; </li>\n<li>修改max_connection_errors的数量为1000： set global max_connect_errors = 1000;</li>\n<li>查看是否修改成功：show variables like ‘%max_connection_errors%’;</li>\n</ul>\n</li>\n<li>使用mysqladmin flush-hosts 命令清理一下hosts文件（不知道mysqladmin在哪个目录下可以使用命令查找：whereis mysqladmin）；<ul>\n<li>在查找到的目录下使用命令修改：/usr/bin/mysqladmin flush-hosts -h192.168.1.1 -P3308 -uroot -prootpwd;</li>\n<li>备注：<br>　　　　其中端口号，用户名，密码都可以根据需要来添加和修改；<br>　　　　配置有master/slave主从数据库的要把主库和从库都修改一遍的（我就吃了这个亏明明很容易的几条命令结果折腾了大半天）；<br>　　　　第二步也可以在数据库中进行，命令如下：flush hosts;</li>\n</ul>\n</li>\n</ol>\n","categories":[{"name":"编程","slug":"编程","count":12,"path":"api/categories/编程.json"}],"tags":[{"name":"MySQL","slug":"MySQL","count":1,"path":"api/tags/MySQL.json"},{"name":"linux","slug":"linux","count":2,"path":"api/tags/linux.json"}]}